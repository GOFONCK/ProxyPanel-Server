#!/bin/bash

# ะกะบัะธะฟั ะดะปั ะทะฐะฟััะบะฐ ะฟะฐะฝะตะปะธ ัะฟัะฐะฒะปะตะฝะธั ะฟัะพะบัะธ

echo "๐ ะัะพะฒะตัะบะฐ ะทะฐะฝัััั ะฟะพััะพะฒ..."

# ะัะพะฒะตััะตะผ ะธ ะพัะฒะพะฑะพะถะดะฐะตะผ ะฟะพััั
for port in 3333 8000 8080 8090; do
    pid=$(lsof -ti :$port 2>/dev/null)
    if [ ! -z "$pid" ]; then
        echo "โ๏ธ  ะะพัั $port ะทะฐะฝัั ะฟัะพัะตััะพะผ $pid. ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ..."
        kill $pid 2>/dev/null
        sleep 1
    fi
done

echo "โ ะะพััั ะพัะฒะพะฑะพะถะดะตะฝั"
echo ""
echo "๐ ะะฐะฟััะบ ะฟะฐะฝะตะปะธ ัะฟัะฐะฒะปะตะฝะธั..."
echo ""

# ะะฐะฟััะบะฐะตะผ ัะตัะฒะตั ะฒ ัะพะฝะต
python3 panel_server.py > panel_server.log 2>&1 &
SERVER_PID=$!

echo "๐ ะกะตัะฒะตั ะทะฐะฟััะตะฝ (PID: $SERVER_PID)"
echo "๐ ะะพะณะธ: tail -f panel_server.log"
echo ""
echo "ะะปั ะพััะฐะฝะพะฒะบะธ: kill $SERVER_PID"
echo "ะะปะธ ะธัะฟะพะปัะทัะนัะต: ./stop_server.sh"



